<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Цвет системной панели / адресной строки -->
    <meta name="theme-color" content="#0f1115" />

    <!-- PWA -->
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- iOS: запуск как веб-приложение на весь экран -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Client" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>Клиент</title>

    <!-- Случайный заголовок из латинских букв -->
    <script>
      (function () {
        var letters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var min = 10,
          max = 16;
        var len = Math.floor(Math.random() * (max - min + 1)) + min;
        var t = "";
        for (var i = 0; i < len; i++)
          t += letters[(Math.random() * letters.length) | 0];
        document.title = t;
      })();
    </script>
  </head>
  <body>
    <main id="app" class="app"></main>
    <div id="log" class="log" hidden></div>

    <script type="module">
      // Регистрация service worker для PWA
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/sw.js").catch(() => {});
      }

      // A2HS (Add to Home Screen)
      let deferredPrompt = null;
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        // Можно при желании автоматически вызвать e.prompt()
        // но чаще показывают кастомную подсказку пользователю.
      });
    </script>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
